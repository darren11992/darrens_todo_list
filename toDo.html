<!DOCTYPE html>
<html>
    <head>
        <title>Darren's To Do List</title>
    </head>
    <body>
        <h1>Heres your toDo List</h1>
        <form>
            <input type="text" name="newInput" id = "newInput">
            <input type="button" onclick="addToList()" value="Add to List">
        </form>
    </body>
    <script>
        var toDoList = ["Put out the rubbish.", "Tidy my Room", "Do more Coding"];
        toDotable = document.createElement('table');
        window.onload = function() {
            generateListOnLoad(toDoList);
        }

        function addNewListItem(itemText){
            var currentRow = document.createElement('tr');
            currentRow.setAttribute("id", itemText);
            currentRow.appendChild( document.createElement('td') );
            currentRow.appendChild( document.createElement('td') );
            var text = document.createTextNode(itemText);
            var deleteButton = document.createElement('input');
            currentRow.cells[0].appendChild( text );
            currentRow.cells[1].appendChild( deleteButton );
            deleteButton.setAttribute("type", "button");
            deleteButton.setAttribute("value", "X");
            deleteButton.onclick = function() { removeFromList(currentRow.getAttribute('id')) }
            toDotable.appendChild(currentRow);
        }
        function generateListOnLoad(toDoList){
            
            for(var i = 0; i < toDoList.length; i++) {
               addNewListItem(toDoList[i])
            }
        document.body.appendChild(toDotable);
        }

        function addToList(){
            var newItem = document.getElementById("newInput").value;
            toDoList.push(newItem);
            addNewListItem(newItem);

        }

        function removeFromList(itemId){
            var listElement = document.getElementById(itemId);
            listElement.parentNode.removeChild(listElement);
            listElementIndex = toDoList.indexOf(listElement);
            toDoList.splice(listElementIndex, 1);

        }

    </script>

</html>